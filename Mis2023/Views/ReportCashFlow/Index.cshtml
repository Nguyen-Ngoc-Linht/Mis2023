
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="k-grid__item k-grid__item--fluid k-grid k-grid--ver k-grid--stretch" style="background-color: white;">
    <div class="k-container k-content-wrapper  k-grid k-grid--ver" id="k_content_wrapper">

        <!-- begin:: Content -->
        <div class="k-content	k-grid__item k-grid__item--fluid k-grid k-grid--hor DaiHoiform" id="k_content">

            <!-- begin:: Content Body -->
            <div class="content-body row">
                <div class="content-body title-table col-12">
                    <p class="content-title">
                        <b>
                            Báo cáo dòng tiền thanh toán - FPTS
                        </b>
                    </p>
                </div>

                <div class="partition-line">
                </div>

                <form method="POST" class="main-form form-inline shadow-lg p-3 mb-5 bg-white rounded">
                    <div class="content-body contain-form-input col-12">
                        <div class="form-input form-input-left col-6 ">
                            <div class="form-group">
                                <label class="label-input" for="daytrading">Ngày</label>
                                <input class="txt-input input-right form-control" type="date" id="dtDayTrading" name="daytrading">
                                <div align="left">
                                    <input style="width:105px;" class="input-btn btn btn-primary" id="btnSearch" type="submit" value="Xem báo cáo">
                                </div>
                            </div>

                        </div>
                        <div class="form-input form-input-right col-6 ">
                            <div class="form-group">
                            </div>

                        </div>
                    </div>

                </form>

                <div class="table-responsive shadow-lg p-3 mb-5 bg-white rounded main-form" id="table-layout">


                    <table class="table" id="tblInvoice">
                        <tbody>
                            <tr>
                                <td style=" color: black; width: 50%; font-weight:bold;"><a class="droptable image-link" id="image">&nbsp;<img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Dư đầu kỳ</td>
                                <td style=" color: black; width: 30%; font-weight: bold;">60,159,214,332</td>
                                <td style=" color: black; width: 20%; font-weight: bold;">Ghi chú</td>

                            </tr>



                            <tr class="td"><td style="white-space:pre; " class="paddingleft30"><a href="#" class="toggle image-link" data-target=".row12"></a>&nbsp;Ngân hàng A</td><td style="white-space:pre; "> 6,159,214,332</td><td style="white-space:pre; "></td></tr>

                            <tr class="td"><td style="white-space:pre; " class="paddingleft30"><a href="#" class="toggle image-link" data-target=".row9"></a>&nbsp;Ngân hàng B</td><td style="white-space:pre; "> 6,159,214,332</td><td style="white-space:pre; "></td></tr>

                            <tr class="td"><td style="white-space:pre; " class="paddingleft30"><a href="#" class="toggle image-link" data-target=".row10"></a>&nbsp;Ngân hàng C</td><td style="white-space:pre; "> 6,159,214,332</td><td style="white-space:pre; "></td></tr>

                        </tbody>

                    </table>


                    <table class="table" id="tblInvoice">
                        <tbody>
                            <tr class="td" style="white-space:pre; width: 50%;font-weight:bold;"><td style="white-space:pre; "><a class="droptable  image-link" data-target=".row2">&nbsp;<img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Dòng tiền phát sinh</td><td style="white-space:pre; width: 30%; "> 42,159,214,332</td><td style="white-space:pre; width: 20%;"></td></tr>

                            <tr class="td row2 " style="padding-left:10px;">
                                <td class="paddingleft30"><a name="10" id="10"></a><a href="#" class="toggle image-link" data-target=".row0"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Mar pro
                                <td style=""> 6,159,214,332</td>
                                <td style=""></td>
                            </tr>

                            <tr class="row0" style="display: none;"><td style="white-space:pre; " class="paddingleft50">Phát vay</a></td></td><td style="white-space:pre; "> (6,159,214,332)</td><td style="white-space:pre; "></td></tr>
                            <tr class="row0" style="display: none;">
                                <td style="white-space:pre; " class="paddingleft50">Thu nợ</a></td></td>
                                <td style="white-space:pre; "> 6,159,214,332</td>
                                <td style="white-space:pre; "></td>

                            </tr>
                            <tr class="td row2 ">
                                <td style="" class="paddingleft30"><a name="20" id="20"></a><a href="#" class="toggle image-link" data-target=".row1"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Mar Mor theo nhóm
                                <td style=""> 6,159,214,332</td>
                                <td style=""></td>
                            <tr class="row1" style="display: none;"><td style="white-space:pre; " class="paddingleft50">Phát vay</a></td><td style="white-space:pre; "> (6,159,214,332)</td><td style="white-space:pre; "></td></tr>
                            <tr class="row1" style="display: none;"><td style="white-space:pre; " class="paddingleft50">Thu nợ</a></td><td style="white-space:pre; "> 6,159,214,332</td><td style="white-space:pre; "></td></tr>

                            <tr class="td row2 ">
                                <td style="" class="paddingleft30"><a name="30" id="30"></a><a href="#" class="toggle image-link" data-target=".row3"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Ứng trước
                                <td style=""> 10,921,945,207</td>
                                <td style=""></td>
                            <tr class="row3" style="display: none;"><td style="white-space:pre; " class="paddingleft50">Phát vay tại ngày</a></td><td style="white-space:pre; "> (6,159,214,332)</td><td style="white-space:pre; "></td></tr>
                            <tr class="row3" style="display: none;"><td style="white-space:pre; " class="paddingleft50">Thu nợ tại ngày</a></td><td style="white-space:pre; "> 6,159,214,332</td><td style="white-space:pre; "></td></tr>

                            <tr class="td row2 ">
                                <td style="" class="paddingleft30"><a name="40" id="40"></a><a href="#" class="toggle image-link" data-target=".row4"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Vay ngân hàng
                                <td style=""> (9,921,945,207)</td>
                                <td style=""></td>
                            </tr>
                            <tr class="row4 " style="display: none;"><td style="white-space:pre; " class="paddingleft50"><a class="toggle image-link" data-target=".row4_1"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Trả nợ vay<td style="white-space:pre; "> 4,217,663,059</td><td style="white-space:pre; "></td></tr>
                            <tr class="row4_1" style="display: none;"><td style="white-space:pre; " class="paddingleft70">Gốc</td><td style="white-space:pre; "> (6,159,214,332)</td><td style="white-space:pre; "></td></tr>
                            <tr class="row4_1" style="display: none;"><td style="white-space:pre; " class="paddingleft70">lãi</td><td style="white-space:pre; "> (6,159,214,332)</td><td style="white-space:pre; "></td></tr>

                            <tr class="row4" style="display: none;"><td style="white-space:pre; " class="paddingleft50">Nhận vay ngân hàng</td><td style="white-space:pre; "> 6,159,214,332</td><td style="white-space:pre; "></td></tr>

                            <tr class="td  row2 ">
                                <td style="" class="paddingleft30"><a name="50" id="50"></a><a href="#" class="toggle image-link" data-target=".row5"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Vay khách hàng ( ezsaving )
                                <td style=""> 8,921,945,207</td>
                                <td style=""></td>
                            </tr>
                            <tr class="row5" style="display: none;"><td style="white-space:pre; " class="paddingleft50"><a>Phát vay</a></td><td style="white-space:pre; "> (6,159,214,332)</td><td style="white-space:pre; "></td></tr>
                            <tr class="row5" style="display: none;"><td style="white-space:pre; " class="paddingleft50"><a>Thu nợ</a></td><td style="white-space:pre; "> 6,159,214,332</td><td style="white-space:pre; "></td></tr>

                            <tr class="td row2 ">
                                <td style="" class="paddingleft30"><a name="60" id="60"></a><a href="#" class="toggle image-link" data-target=".row6"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Vay từ tổ chức - cá nhân khác
                                <td style=""> 7,921,945,207</td>
                                <td style=""></td>
                            </tr>

                            <tr class="row6" style="display: none;"><td style="white-space:pre; " class="paddingleft50"><a>KH tất toán trong ngày</a></td><td style="white-space:pre; "> (6,159,214,332)</td><td style="white-space:pre; "></td></tr>
                            <tr class="row6" style="display: none;"><td style="white-space:pre; " class="paddingleft50"><a>KH cho vay trong ngày</a></td><td style="white-space:pre; "> 6,159,214,332</td><td style="white-space:pre; "></td></tr>

                            <tr class="td row2 ">
                                <td style="" class="paddingleft30"><a name="60" id="60"></a><a href="#" class="toggle image-link" data-target=".row7"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Gửi tiết kiệm, mua CCTG, TP
                                <td style=""> 7,921,945,207</td>
                                <td style=""></td>
                            </tr>

                            <tr class="row7" style="display: none;"><td style="white-space:pre; " class="paddingleft50">Gửi tiết kiệm, mua CCTG, TP</td><td style="white-space:pre; "> (6,159,214,332)</td><td style="white-space:pre; "></td></tr>

                            <tr class="row7 " style="display: none;"><td style="white-space:pre; " class="paddingleft50">Tất toán TK, bán CCTG, TP</td> <td style="white-space:pre; "> 4,217,663,059</td><td style="white-space:pre; "></td></tr>



                            <tr class=" td row2">
                                <td style="" class="paddingleft30"><a name="60" id="60"></a><a href="#" class="toggle image-link" data-target=".row8"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Thu - Chi khác
                                <td style=""> 18,921,945,207</td>
                                <td style=""></td>
                            </tr>
                            <tr class="row8 parent" style="display: none;"><td style="white-space:pre; " class="paddingleft50"><a class="toggle image-link" data-target=".row8_1"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Chi khác<td style="white-space:pre; "> 4,217,663,059</td><td style="white-space:pre; "></td></tr>

                            <tr class="row8_1" style="display: none;"><td style="white-space:pre; " class="paddingleft70"><a>&nbsp;Chi thanh toán, mua sắm, dịch vụ</a></td><td style="white-space:pre; "> (6,159,214,332)</td><td style="white-space:pre; "></td></tr>
                            <tr class="row8_1" style="display: none;"><td style="white-space:pre; " class="paddingleft70"><a>&nbsp;Chi nộp thuế</a></td><td style="white-space:pre; "> (6,159,214,332)</td><td style="white-space:pre; "></td></tr>

                            <tr class="row8_1" style="display: none;"><td style="white-space:pre; " class="paddingleft70"><a>&nbsp;Chi khác</a></td><td style="white-space:pre; "> (6,159,214,332)</td><td style="white-space:pre; "></td></tr>




                            <tr class="row8 parent" style="display: none;"><td style="white-space:pre; " class="paddingleft50"><a href="#" class="toggle image-link" data-target=".row8_2"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Thu khác<td style="white-space:pre; "> 12,921,945,207</td><td style="white-space:pre; "></td></tr>

                            <tr class="row8_2" style="display: none;"><td style="white-space:pre; " class="paddingleft70"><a>&nbsp;Thu từ hợp đồng</a></td><td style="white-space:pre; "> 6,159,214,332</td><td style="white-space:pre; "></td></tr>
                            <tr class="row8_2" style="display: none;"><td style="white-space:pre; " class="paddingleft70"><a>&nbsp;Thu khác</a></td><td style="white-space:pre; "> 6,159,214,332</td><td style="white-space:pre; "></td></tr>


                        </tbody>

                    </table>

                    <table class="table" id="tblInvoice">

                        <tr>
                            <td style="color: black; width: 50%; "><a class="droptable image-link">&nbsp;<img style="display: none;" border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/Plus.gif"><img border="0" src="~/TĂNG TRƯỞNG DOANH THU THEO LOẠI HÌNH KINH DOANH_files/102246.png"></a>&nbsp;Dư cuối kỳ</td>
                            <td style="color: black; width: 30%;">60,159,214,332</td>
                            <td style="color: black; width: 20%;"></td>

                        </tr>

                        <tbody>

                            <tr class="td "><td style="white-space:pre; " class="paddingleft30"><a href="#" class="toggle image-link" data-target=".t1row1"></a>&nbsp;Ngân hàng A</td><td style="white-space:pre; "> 6,159,214,332</td><td style="white-space:pre; "></td></tr>

                            <tr class="td"><td style="white-space:pre; " class="paddingleft30"><a href="#" class="toggle image-link" data-target=".t1row2"></a>&nbsp;Ngân hàng B</td><td style="white-space:pre; "> 6,159,214,332</td><td style="white-space:pre; "></td></tr>

                            <tr class="td"><td style="white-space:pre; " class="paddingleft30"><a href="#" class="toggle image-link" data-target=".t1row"></a>&nbsp;Ngân hàng C</td><td style="white-space:pre; "> 6,159,214,334</td><td style="white-space:pre; "></td></tr>


                        </tbody>

                    </table>

                </div>

            </div>

            <!-- end:: Content Body -->
        </div>
    </div>
</div>

<script type="text/javascript">



    $(document).ready(function () {



        //         $("#image").click(function() {

        //   $(this).children().toggle();
        // });



        $('.image-link').click(function () {
            $(this).find('img').toggle();
        });





        const anchorTags = document.querySelectorAll(".droptable");

        // Hàm xử lý sự kiện click
        function handleClick(event) {

            event.preventDefault(); // Ngăn chặn hành vi mặc định của thẻ 'a'

            // Tìm bảng gần nhất chứa thẻ 'a'
            const closestTable = event.target.closest("table");

            // Chọn tất cả các class có tên trong bảng tìm được
            const parentRowss = closestTable.querySelectorAll('.td');

            // Chọn tất cả các tr trong bảng tìm được
            const allRows = closestTable.querySelectorAll("tr");



            if (allRows[1].style.display === "") {


                for (let i = 1; i < allRows.length; i++) {
                    debugger;
                    // if(allRows[i].style.display === ""){
                    //     var img =  allRows[i].querySelectorAll('td a img');
                    //    $(img).toggle();debugger;
                    // }

                    allRows[i].style.display = "none";


                }
            } else if (allRows[1].style.display === "none") {
                debugger;
                for (let i = 1; i < allRows.length; i++) {

                    allRows[1].style.display = "";
                    parentRowss[i].style.display = "";

                }
            }
        }
        anchorTags.forEach(anchor => {
            anchor.addEventListener("click", handleClick);
        });



        $(".toggle").click(function (e) {
            e.preventDefault();
            var target = $(this).data("target");
            $(target).toggle();



            hiderenOfHiddenParents("tblInvoice", "parent");
        });
        function hiderenOfHiddenParents(tableId, Class) {
            const table = document.getElementById(tableId);
            const parentRows = table.querySelectorAll('.parent');

            parentRows.forEach((row) => {

                if (row.style.display === "none") {

                    let nextElem = row.nextElementSibling;

                    while (nextElem && !nextElem.classList.contains("parent")) {
                        nextElem.style.display = "none";
                        nextElem = nextElem.nextElementSibling;

                    }
                }
            });
        }

    });
</script>

